---
title: "ChatGPTã§TradingViewã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦ã¿ãŸ"
emoji: "ğŸ•"
type: "tech"
topics:
  - "tradingview"
  - "chatgpt"
  - "pinescript"
published: true
published_at: "2023-03-26 20:02"
---

# ã¯ã˜ã‚ã«
TradingViewã¯ç„¡æ–™ã§ä½¿ãˆã‚‹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãŒæ²¢å±±ã‚ã‚Šã¾ã™ãŒã€ç„¡æ–™ä¼šå“¡ã®å ´åˆã€ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’3ã¤ã¾ã§ã—ã‹è¨­å®šã§ãã¾ã›ã‚“ã€‚
TradingViewãŒæä¾›ã—ã¦ã„ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã§ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’è‡ªä½œã§ãã¾ã™ã€‚
ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’è‡ªä½œã—ã¦ã€è¤‡æ•°ã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’1ã¤ã«ã¾ã¨ã‚ã¦ã—ã¾ãˆã°ã€3ã¤ã®æ ã«æ²¢å±±ã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã§ãã‚‹ã‚“ã§ã™ã€‚
ä»¥å‰ã‹ã‚‰ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’è‡ªä½œã—ãŸã„ã¨ã„ã†æ€ã„ã¯ã‚ã‚Šã¤ã¤ã‚‚ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆå­¦ç¿’ã®æ‰‹é–“ã‚’æƒœã—ã‚“ã§ãªã‹ãªã‹å–ã‚Šçµ„ã‚ãªã„ã§ã„ã¾ã—ãŸã€‚
æœ€è¿‘æµè¡Œã‚ŠChatGPTã‚’æ´»ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒå‡ºæ¥ã‚‹ã“ã¨ã‚’çŸ¥ã£ãŸã®ã§ã€
ChatGPTã‚’æ´»ç”¨ã—ã¦ã‚ˆãçŸ¥ã‚‰ãªã„è¨€èªã‚’æ›¸ã„ã¦ã¿ã‚ˆã†ã¨ã„ã†è©¦ã¿ã§ã™ã€‚

ChatGPTã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ç„¡æ–™ç‰ˆãªã®ã§ã€3.5ã§ã™ã€‚

# TradingViewã¨ã¯
FXã‚„ã£ã¦ã„ã‚‹æ–¹ã«ã¯ãŠãªã˜ã¿ã‹ã¨æ€ã„ã¾ã™ãŒã€TradingViewã¨ã„ã†Webã‚µã‚¤ãƒˆãŒã‚ã‚Šã¾ã™ã€‚
æ ªå¼ã€FXã€ä»®æƒ³é€šè²¨ãªã©ã®å–å¼•ã‚’è¡Œã†ãŸã‚ã®ãƒãƒ£ãƒ¼ãƒˆã‚„åˆ†æãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã™ã‚‹Webãƒ™ãƒ¼ã‚¹ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚
TradingViewã¯ã€ä½¿ã„ã‚„ã™ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨å¤šæ§˜ãªæ©Ÿèƒ½ã‚’å‚™ãˆã¦ãŠã‚Šã€å€‹äººæŠ•è³‡å®¶ã‹ã‚‰ãƒ—ãƒ­ã®ãƒˆãƒ¬ãƒ¼ãƒ€ãƒ¼ã¾ã§å¹…åºƒã„å±¤ã«äººæ°—ãŒã‚ã‚Šã¾ã™ã€‚

TradingViewã®ä¸»ãªæ©Ÿèƒ½ã«ã¯ã€ä»¥ä¸‹ã®ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚

1. ãƒãƒ£ãƒ¼ãƒˆä½œæˆï¼šæ ªä¾¡ã€ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆã€ä»®æƒ³é€šè²¨ãªã©ã®ä¾¡æ ¼ã‚’ã‚°ãƒ©ãƒ•åŒ–ã—ã€æ™‚ç³»åˆ—ã§è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€è¤‡æ•°ã®æŒ‡æ¨™ã‚„ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æãƒ„ãƒ¼ãƒ«ã‚’é©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

1. ã‚¢ãƒ©ãƒ¼ãƒˆï¼šä¾¡æ ¼ã‚„ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ãŒç‰¹å®šã®æ¡ä»¶ã«é”ã—ãŸå ´åˆã«ã€ã‚¢ãƒ©ãƒ¼ãƒˆã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€æ ªä¾¡ãŒä¸€å®šã®æ°´æº–ã«é”ã—ãŸæ™‚ã«é€šçŸ¥ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

1. ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ï¼šæŒ‡å®šã—ãŸæ¡ä»¶ã«åŸºã¥ã„ã¦ã€éŠ˜æŸ„ã‚’ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€P/Eæ¯”ãŒä¸€å®šã®æ°´æº–ä»¥ä¸‹ã§ã‚ã‚‹æ ªå¼ã‚’æ¤œç´¢ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

1. ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ã‚¤ãƒ‡ã‚¢ã®å…±æœ‰ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒãƒ£ãƒ¼ãƒˆã‚„åˆ†æã‚’å…±æœ‰ã—ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨æ„è¦‹äº¤æ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

1. çµŒæ¸ˆæŒ‡æ¨™ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼šçµŒæ¸ˆæŒ‡æ¨™ã®ç™ºè¡¨ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¡¨ç¤ºã—ã€ãã‚Œã«åŸºã¥ã„ã¦å–å¼•ã®æˆ¦ç•¥ã‚’ç«‹ã¦ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚


https://jp.tradingview.com/

# TradingViewã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èª
TradingViewã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã¯ã€ŒPineScriptã€ã¨è¨€ã„ã¾ã™ã€‚

åŸºæœ¬çš„ãªæ–‡æ³•ã¯JavaScriptã«ä¼¼ã¦ã„ã¾ã™ã€‚

PineScriptã®ä¸»ãªç‰¹å¾´ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

1. ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ï¼šPineScriptã‚’ä½¿ç”¨ã—ã¦ã€ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€ç§»å‹•å¹³å‡ç·šã€RSIã€MACDãªã©ã®æŒ‡æ¨™ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€PineScriptã‚’ä½¿ç”¨ã—ã¦ã€ç•°ãªã‚‹ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ã‚’çµ„ã¿åˆã‚ã›ã¦æ–°ã—ã„æŒ‡æ¨™ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

1. ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ï¼šPineScriptã‚’ä½¿ç”¨ã—ã¦ã€ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ã®ã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ãƒãƒ¼ã€ä¾¡æ ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã€éå»ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã®äºˆæ¸¬ãªã©ã‚’åˆ©ç”¨ã—ã¦ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒ»ã‚¤ã‚°ã‚¸ãƒƒãƒˆãƒ«ãƒ¼ãƒ«ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

1. ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ï¼šPineScriptã‚’ä½¿ç”¨ã—ã¦ã€ç‹¬è‡ªã®ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€ã‚ã‚‹ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ã®ç‰¹å®šã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

1. ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼šPineScriptã‚’ä½¿ç”¨ã—ã¦ã€éå»ã®ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã¯ã€ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ã®æœ‰åŠ¹æ€§ã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

https://jp.tradingview.com/pine-script-docs/en/v5/Introduction.html

https://jp.tradingview.com/pine-script-reference/v5/


# ChatGPTã§ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ›¸ãæ–¹

ã¨ã‚Šã‚ãˆãšé›‘ã«èã„ã¦ã¿ã¾ã™ã€‚
åŸºæœ¬ã®ç§»å‹•å¹³å‡ç·šã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/9d90731d1fbe-20230326.png)

```js
//@version=5
indicator("5 Moving Averages", overlay=true)

// ç§»å‹•å¹³å‡ç·šã®é•·ã•ã‚’è¨­å®šã™ã‚‹
ma_length_1 = input.int(10, "MA Length 1", minval=1)
ma_length_2 = input.int(20, "MA Length 2", minval=1)
ma_length_3 = input.int(30, "MA Length 3", minval=1)
ma_length_4 = input.int(40, "MA Length 4", minval=1)
ma_length_5 = input.int(50, "MA Length 5", minval=1)

// ç§»å‹•å¹³å‡ç·šã‚’è¨ˆç®—ã™ã‚‹
ma_1 = ta.sma(close, ma_length_1)
ma_2 = ta.sma(close, ma_length_2)
ma_3 = ta.sma(close, ma_length_3)
ma_4 = ta.sma(close, ma_length_4)
ma_5 = ta.sma(close, ma_length_5)

// ç§»å‹•å¹³å‡ç·šã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹
plot(ma_1, color=color.yellow, linewidth=1)
plot(ma_2, color=color.blue, linewidth=1)
plot(ma_3, color=color.green, linewidth=1)
plot(ma_4, color=color.red, linewidth=1)
plot(ma_5, color=color.orange, linewidth=1)

// å‡¡ä¾‹ã‚’è¡¨ç¤ºã™ã‚‹
legend_label_1 = "MA " + str.tostring(ma_length_1)
legend_label_2 = "MA " + str.tostring(ma_length_2)
legend_label_3 = "MA " + str.tostring(ma_length_3)
legend_label_4 = "MA " + str.tostring(ma_length_4)
legend_label_5 = "MA " + str.tostring(ma_length_5)
plotchar(false, "", "", location.bottom, size = size.tiny)
plotchar(false, "", "", location.bottom, size = size.tiny, text = legend_label_1, color = color.yellow)
plotchar(false, "", "", location.bottom, size = size.tiny, text = legend_label_2, color = color.blue)
plotchar(false, "", "", location.bottom, size = size.tiny, text = legend_label_3, color = color.green)
plotchar(false, "", "", location.bottom, size = size.tiny, text = legend_label_4, color = color.red)
plotchar(false, "", "", location.bottom, size = size.tiny, text = legend_label_5, color = color.orange)

```

ã„ã„æ„Ÿã˜ã§ã™ã­ã€‚

å‡ºã¦ããŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã®çµæœã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€TradingViewã®ã€ŒPineã‚¨ãƒ‡ã‚£ã‚¿ã€ã«è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/f4fbb69591bd-20230326.png)

1. ç”»é¢ä¸‹éƒ¨ã®ã€ŒPineã‚¨ãƒ‡ã‚£ã‚¿ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚¨ãƒ‡ã‚£ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
2. å³ã«ã‚ã‚‹ã€Œé–‹ãã€ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
3. æ–°è¦ä½œæˆã®ã€Œã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’å¼µã‚Šä»˜ã‘ã¾ã™ã€‚å…ƒã€…æ›¸ã„ã¦ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã¯æ¶ˆã—ã¦ã—ã¾ã£ã¦ã‚ˆã„ã§ã™ã€‚
5. ä¿å­˜ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
6. åå‰ã‚’ä»˜ã‘ã‚‹ã‚ˆã†ã«ä¿ƒã•ã‚Œã‚‹ã®ã§ã€åå‰ã‚’æ±ºã‚ã¦ã€ä¿å­˜ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯

ã“ã‚Œã§è¡¨ç¤ºã•ã‚Œã‚‹ã€ã¨æ€ã„ãã‚„ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/40faa1f59618-20230326.png)
ç”»åƒã®ä¸‹ã«ã‚ã‚‹èµ¤å­—ãŒã‚¨ãƒ©ãƒ¼ã§ã™ã€‚
ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ä¸Šä¸‹ã«æ ã‚’åºƒã’ã‚‰ã‚Œã‚‹ã®ã§åºƒã’ã¦ç¢ºèªã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/57142bfdb13b-20230326.png)

```
Cannot call 'plotchar' with argument 'text'='legend_label_1'. An argument of 'simple string' type was used but a 'const string' is expected.
```

`plotchar`ã«æŒ‡å®šã—ãŸã€`text=legend_label_1`ãŒã‚ˆããªã„ã‚ˆã†ã§ã™ã€‚


è©±ãŒé•ã†ã®ã§ã€ChatGPTã«èã„ã¦ã¿ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/0a7d5015b302-20230326.png)

```js
//@version=5
indicator("5 Moving Averages", overlay=true)

// ç§»å‹•å¹³å‡ç·šã®é•·ã•ã‚’è¨­å®šã™ã‚‹
ma_length_1 = input.int(10, "MA Length 1", minval=1)
ma_length_2 = input.int(20, "MA Length 2", minval=1)
ma_length_3 = input.int(30, "MA Length 3", minval=1)
ma_length_4 = input.int(40, "MA Length 4", minval=1)
ma_length_5 = input.int(50, "MA Length 5", minval=1)

// ç§»å‹•å¹³å‡ç·šã‚’è¨ˆç®—ã™ã‚‹
ma_1 = ta.sma(close, ma_length_1)
ma_2 = ta.sma(close, ma_length_2)
ma_3 = ta.sma(close, ma_length_3)
ma_4 = ta.sma(close, ma_length_4)
ma_5 = ta.sma(close, ma_length_5)

// ç§»å‹•å¹³å‡ç·šã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹
plot(ma_1, color=color.yellow, linewidth=1)
plot(ma_2, color=color.blue, linewidth=1)
plot(ma_3, color=color.green, linewidth=1)
plot(ma_4, color=color.red, linewidth=1)
plot(ma_5, color=color.orange, linewidth=1)

// å‡¡ä¾‹ã‚’è¡¨ç¤ºã™ã‚‹
var label1 = "MA " + str.tostring(ma_length_1)
var label2 = "MA " + str.tostring(ma_length_2)
var label3 = "MA " + str.tostring(ma_length_3)
var label4 = "MA " + str.tostring(ma_length_4)
var label5 = "MA " + str.tostring(ma_length_5)
plotchar(false, "", "", location.bottom, size = size.tiny)
plotchar(false, "", "", location.bottom, size = size.tiny, text = label1, color = color.yellow)
plotchar(false, "", "", location.bottom, size = size.tiny, text = label2, color = color.blue)
plotchar(false, "", "", location.bottom, size = size.tiny, text = label3, color = color.green)
plotchar(false, "", "", location.bottom, size = size.tiny, text = label4, color = color.red)
plotchar(false, "", "", location.bottom, size = size.tiny, text = label5, color = color.orange)
```
ã¡ãªã¿ã«ã“ã‚Œã‚‚å‹•ãã¾ã›ã‚“ã€‚
ãƒãƒ‹ãƒ¥ã‚¢ãƒ«èª¿ã¹ã¦textã¯constã§ãªã„ã¨ã„ã‘ãªã„ã¨ã„ã†äº‹ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã®ã§ã€æ•™ãˆã¦ã¿ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/56513956048f-20230326.png)


plotcharã®èª¬æ˜
https://jp.tradingview.com/pine-script-reference/v5/#fun_plotchar

constï¼å®šæ•°ã˜ã‚ƒãªã„ã¨ã„ã‘ãªã„ã®ã§ã€å¤‰æ•°ã¯å…¥ã‚Œã‚‰ã‚Œãªã„ã¨ã„ã†äº‹ã®ã‚ˆã†ã§ã™ã€‚
varã˜ã‚ƒãƒ€ãƒ¡ã£ã¦ã“ã¨ã§ã™ã­ã€‚


```js
//@version=5
indicator("5 Moving Averages", overlay=true)

// ç§»å‹•å¹³å‡ç·šã®é•·ã•ã‚’è¨­å®šã™ã‚‹
ma_length_1 = input.int(10, "MA Length 1", minval=1)
ma_length_2 = input.int(20, "MA Length 2", minval=1)
ma_length_3 = input.int(30, "MA Length 3", minval=1)
ma_length_4 = input.int(40, "MA Length 4", minval=1)
ma_length_5 = input.int(50, "MA Length 5", minval=1)

// ç§»å‹•å¹³å‡ç·šã‚’è¨ˆç®—ã™ã‚‹
ma_1 = ta.sma(close, ma_length_1)
ma_2 = ta.sma(close, ma_length_2)
ma_3 = ta.sma(close, ma_length_3)
ma_4 = ta.sma(close, ma_length_4)
ma_5 = ta.sma(close, ma_length_5)

// ç§»å‹•å¹³å‡ç·šã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹
plot(ma_1, color=color.yellow, linewidth=1)
plot(ma_2, color=color.blue, linewidth=1)
plot(ma_3, color=color.green, linewidth=1)
plot(ma_4, color=color.red, linewidth=1)
plot(ma_5, color=color.orange, linewidth=1)

// å‡¡ä¾‹ã‚’è¡¨ç¤ºã™ã‚‹
plotchar(false, "", "", location.bottom, size = size.tiny)
plotchar(false, "", "MA " + str.tostring(ma_length_1), location.bottom, size = size.tiny, color = color.yellow)
plotchar(false, "", "MA " + str.tostring(ma_length_2), location.bottom, size = size.tiny, color = color.blue)
plotchar(false, "", "MA " + str.tostring(ma_length_3), location.bottom, size = size.tiny, color = color.green)
plotchar(false, "", "MA " + str.tostring(ma_length_4), location.bottom, size = size.tiny, color = color.red)
plotchar(false, "", "MA " + str.tostring(ma_length_5), location.bottom, size = size.tiny, color = color.orange)
```
textã®å¼•æ•°ãŒæ¶ˆãˆãŸï¼
ãã—ã¦ä»Šåº¦ã¯ç¬¬2å¼•æ•°ãŒåŒæ§˜ã®ã‚¨ãƒ©ãƒ¼ã«ï½—
```
Cannot call 'plotchar' with argument 'char'='call 'operator +' (simple string)'. An argument of 'simple string' type was used but a 'input string' is expected.
```


ãã®è¾ºä¿®æ­£ã—ã¦ä¿å­˜ã—ã¦ã¿ã¦ã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ãªã‘ã‚Œã°æˆåŠŸã§ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/b36860b4af26-20230326.png)

ä¿®æ­£ç‰ˆãŒã“ã¡ã‚‰
```js
//@version=5
indicator("5 Moving Averages", overlay=true)

// ç§»å‹•å¹³å‡ç·šã®é•·ã•ã‚’è¨­å®šã™ã‚‹
ma_length_1 = input.int(10, "MA Length 1", minval=1)
ma_length_2 = input.int(20, "MA Length 2", minval=1)
ma_length_3 = input.int(30, "MA Length 3", minval=1)
ma_length_4 = input.int(40, "MA Length 4", minval=1)
ma_length_5 = input.int(50, "MA Length 5", minval=1)

// ç§»å‹•å¹³å‡ç·šã‚’è¨ˆç®—ã™ã‚‹
ma_1 = ta.sma(close, ma_length_1)
ma_2 = ta.sma(close, ma_length_2)
ma_3 = ta.sma(close, ma_length_3)
ma_4 = ta.sma(close, ma_length_4)
ma_5 = ta.sma(close, ma_length_5)

// ç§»å‹•å¹³å‡ç·šã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹
plot(ma_1, color=color.blue, linewidth=2)
plot(ma_2, color=color.orange, linewidth=2)
plot(ma_3, color=color.yellow, linewidth=2)
plot(ma_4, color=color.red, linewidth=2)
plot(ma_5, color=color.orange, linewidth=2)

// å‡¡ä¾‹ã‚’è¡¨ç¤ºã™ã‚‹
plotchar(false, "", "â„", location.bottom, size = size.tiny, color = color.yellow)
plotchar(false, "", "â„", location.bottom, size = size.tiny, text = "MA2", color = color.blue)
plotchar(false, "", "â„", location.bottom, size = size.tiny, text = "MA3", color = color.green)
plotchar(false, "", "â„", location.bottom, size = size.tiny, text = "MA4", color = color.red)
plotchar(false, "", "â„", location.bottom, size = size.tiny, text = "MA5", color = color.orange)
```

ãƒãƒ£ãƒ¼ãƒˆä¸Šã«ã‚‚ç·šãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/c3aa38b72d71-20230326.png)


# ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã®è¡¨ç¤ºã¨ç·¨é›†
ä½œæˆã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ä»–ã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿åŒæ§˜ã€æ•°å€¤ã‚’å¤‰æ›´ã—ã¦æœŸé–“ã®å¤‰æ›´ãŒå¯èƒ½ã§ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/01f163216b17-20230326.png)

æœ€åˆã‹ã‚‰å¤‰æ›´ã—ã¦ãŠããŸã„å ´åˆã¯ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¸‹è¨˜ã®éƒ¨åˆ†ã®æ•°å€¤ã‚’å¤‰æ›´ã—ã¦ä¿å­˜ã—ã¦ãŠãã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚
```js
// ç§»å‹•å¹³å‡ç·šã®é•·ã•ã‚’è¨­å®šã™ã‚‹
ma_length_1 = input.int(10, "MA Length 1", minval=1)
ma_length_2 = input.int(20, "MA Length 2", minval=1)
ma_length_3 = input.int(30, "MA Length 3", minval=1)
ma_length_4 = input.int(40, "MA Length 4", minval=1)
ma_length_5 = input.int(50, "MA Length 5", minval=1)
```

# ã•ã‚‰ã«æ”¹è‰¯ã—ã¦ã¿ã‚‹
è‰²ã®æŒ‡å®šã‚’ã—ãŸã„ã®ã§ã€èã„ã¦ã¿ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/57a50a04fa07-20230326.png)

### å®Ÿè£…ä¾‹
```js
// è‰²å®šç¾©
var deep_pink = color.rgb(255, 20, 147)
var bisque = color.rgb(255, 228, 196)

plot(ma_1, color=bisque, linewidth=2)
plot(ma_2, color=deep_pink, linewidth=2)
```

# ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ã®è¿½åŠ 
ã“ã‚Œã ã‘ã ã¨ã€å…ƒã‹ã‚‰ã‚ã‚‹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ä½¿ã†ã®ã¨ã‚ã¾ã‚Šé•ã„ãŒã‚ã‚Šã¾ã›ã‚“ã€‚
ä»–ã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚‚å¢—ã‚„ã—ã¦ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿æ ã‚’ç¢ºä¿ã—ãŸã„ã§ã™ã€‚

ã¨è¨€ã†ã“ã¨ã§æ¬¡ã¯ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/3c7e887316b2-20230326.png)

```js
//@version=5
indicator("Bollinger Bands", overlay=true)

// ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹
length = input.int(20, "Length", minval=1)
mult = input.float(2.0, "Multiplier", minval=0.001, maxval=50)

// ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ã‚’è¨ˆç®—ã™ã‚‹
basis = ta.sma(close, length)
dev = mult * ta.stdev(close, length)
upper = basis + dev
lower = basis - dev

// ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹
plot(basis, color=color.yellow, linewidth=1)
plot(upper, color=color.blue, linewidth=1)
plot(lower, color=color.green, linewidth=1)

// ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ã®ä¸­å¿ƒç·šã¨ä¸Šä¸‹ãƒãƒ³ãƒ‰ã®åå‰ã‚’è¨­å®šã™ã‚‹
plotchar(false, "", "", location.bottom, size = size.tiny)
plotchar(false, "", "Basis", location.bottom, size = size.tiny, color = color.yellow)
plotchar(false, "", "Upper", location.bottom, size = size.tiny, color = color.blue)
plotchar(false, "", "Lower", location.bottom, size = size.tiny, color = color.green)
```

ã“ã¡ã‚‰ã¯ã‚¨ãƒ©ãƒ¼ãªããã®ã¾ã¾è¡¨ç¤ºã§ããã†ã§ã™ã€‚
1ã¤ã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã«è¡¨ç¤ºã—ãŸã„ã®ã§ã€
å…ˆã»ã©ã®ç§»å‹•å¹³å‡ç·šã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¸‹ã«è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚
æœ€åˆã®`indicator`ã®éƒ¨åˆ†ã¯ä¸è¦ãªã®ã§ã€ãã®ä¸‹ã‹ã‚‰ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚
```
//@version=5
indicator("Bollinger Bands", overlay=true)
```

```js
//@version=5
indicator("5 Moving Averages", overlay=true)

// ç§»å‹•å¹³å‡ç·šã®é•·ã•ã‚’è¨­å®šã™ã‚‹
ma_length_1 = input.int(10, "MA Length 1", minval=1)
ma_length_2 = input.int(20, "MA Length 2", minval=1)

// ï½ã€€ä¸­ç•¥ã€€ï½

color.green)
plotchar(false, "", "â„", location.bottom, size = size.tiny, text = "MA4", color = color.red)
plotchar(false, "", "â„", location.bottom, size = size.tiny, text = "MA5", color = color.orange)


// ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹
length = input.int(20, "Length", minval=1)
mult = input.float(2.0, "Multiplier", minval=0.001, maxval=50)

// ï½ã€€ä¸­ç•¥ã€€ï½

plotchar(false, "", "Upper", location.bottom, size = size.tiny, color = color.blue)
plotchar(false, "", "Lower", location.bottom, size = size.tiny, color = color.green)
```

![](https://storage.googleapis.com/zenn-user-upload/eb1a7a70fc34-20230326.png)
ã¨ã„ã†äº‹ã§ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿1ã¤ã§ç§»å‹•å¹³å‡ç·šã¨ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ã‚’è¡¨ç¤ºã™ã‚‹äº‹ãŒå‡ºæ¥ã¾ã—ãŸã€‚

# MACDã®è¿½åŠ 
ã‚ªã‚·ãƒ¬ãƒ¼ã‚¿ç³»ã‚‚ã‚„ã£ã¦ã¿ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/0884db9cb7dc-20230327.png)

```js
//@version=5
indicator("MACD", overlay=true)

// MACDã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹
fast_length = input.int(12, "Fast Length", minval=1)
slow_length = input.int(26, "Slow Length", minval=1)
signal_length = input.int(9, "Signal Length", minval=1)

// MACDã‚’è¨ˆç®—ã™ã‚‹
fast_ma = ta.ema(close, fast_length)
slow_ma = ta.ema(close, slow_length)
macd = fast_ma - slow_ma
signal = ta.ema(macd, signal_length)

// MACDã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹
plot(macd, color=color.blue, linewidth=1)
plot(signal, color=color.red, linewidth=1)

// MACDã®ä¸­å¿ƒç·šã¨ã‚·ã‚°ãƒŠãƒ«ã®åå‰ã‚’è¨­å®šã™ã‚‹
plotchar(false, "", "", location.bottom, size = size.tiny)
plotchar(false, "", "MACD", location.bottom, size = size.tiny, color = color.blue)
plotchar(false, "", "Signal", location.bottom, size = size.tiny, color = color.red)

// MACDã¨ã‚·ã‚°ãƒŠãƒ«ã®äº¤å·®ç‚¹ã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹
plotshape(crossover(macd, signal), style=shape.triangleup, location=location.bottom, color=color.green, size=size.small)
plotshape(crossunder(macd, signal), style=shape.triangledown, location=location.top, color=color.red, size=size.small)
```

ä¾‹ã«ã‚ˆã£ã¦ã‚¨ãƒ©ãƒ¼å‡ºã‚‹ã®ã§èã„ã¦ã¿ã¾ã™ã€‚
ã ã‚“ã ã‚“ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã‚‚æ°—ã«ãªã‚‰ãªããªã£ã¦ãã¾ã™ã€‚

### ç§
```
Could not find function or function reference 'crossover'ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™
```

### ChatGPT
```
crossoveré–¢æ•°ã¯ã€Pineã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«äº‹å‰ã«å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
crossoveré–¢æ•°ã¯ã€2ã¤ã®ã‚·ãƒªãƒ¼ã‚ºãŒã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ãƒãƒ¼ã—ãŸå ´åˆã«trueã‚’è¿”ã—ã€ã‚¯ãƒ­ã‚¹ã‚¢ãƒ³ãƒ€ãƒ¼ã—ãŸå ´åˆã«falseã‚’è¿”ã—ã¾ã™ã€‚
åŒæ§˜ã«ã€crossunderé–¢æ•°ã¯ã€2ã¤ã®ã‚·ãƒªãƒ¼ã‚ºãŒã‚¯ãƒ­ã‚¹ã‚¢ãƒ³ãƒ€ãƒ¼ã—ãŸå ´åˆã«trueã‚’è¿”ã—ã€ã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ãƒãƒ¼ã—ãŸå ´åˆã«falseã‚’è¿”ã—ã¾ã™ã€‚

ä»¥ä¸‹ã¯ã€crossoveré–¢æ•°ã¨crossunderé–¢æ•°ã‚’å®šç¾©ã™ã‚‹æ–¹æ³•ã®ä¾‹ã§ã™ã€‚
```

```js
//@version=5
indicator("Example")

// crossoveré–¢æ•°ã‚’å®šç¾©ã™ã‚‹
crossover(x, y) =>
    x[1] < y[1] and x > y

// crossunderé–¢æ•°ã‚’å®šç¾©ã™ã‚‹
crossunder(x, y) =>
    x[1] > y[1] and x < y

// ã‚µãƒ³ãƒ—ãƒ«ã®ä½¿ç”¨æ–¹æ³•
a = sma(close, 10)
b = sma(close, 20)

// aã¨bã®ã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ãƒãƒ¼ã¨ã‚¯ãƒ­ã‚¹ã‚¢ãƒ³ãƒ€ãƒ¼ã‚’æ¤œå‡ºã™ã‚‹
crossover_ab = crossover(a, b)
crossunder_ab = crossunder(a, b)

// çµæœã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹
plot(a)
plot(b)

plotshape(crossover_ab, style=shape.triangleup, location=location.bottom, color=color.green, size=size.small)
plotshape(crossunder_ab, style=shape.triangledown, location=location.top, color=color.red, size=size.small)
```

```
ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã¯ã€æœ€åˆã«crossoveré–¢æ•°ã¨crossunderé–¢æ•°ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚
æ¬¡ã«ã€smaé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã€2ã¤ã®ç§»å‹•å¹³å‡ç·šaã¨bã‚’è¨ˆç®—ã—ã¦ã„ã¾ã™ã€‚
ãã®å¾Œã€crossoveré–¢æ•°ã¨crossunderé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã€aã¨bã®ã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ãƒãƒ¼ã¨ã‚¯ãƒ­ã‚¹ã‚¢ãƒ³ãƒ€ãƒ¼ã‚’æ¤œå‡ºã—ã€
plotshapeé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã€ãã‚Œãã‚Œä¸‰è§’å½¢ã§ãƒ—ãƒ­ãƒƒãƒˆã—ã¦ã„ã¾ã™ã€‚

crossoveré–¢æ•°ã¨crossunderé–¢æ•°ã‚’å®šç¾©ã—ãŸå¾Œã€MACDã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«æˆ»ã‚Šã€
crossoveré–¢æ•°ã¨crossunderé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦MACDã¨ã‚·ã‚°ãƒŠãƒ«ã®ã‚¯ãƒ­ã‚¹ã‚ªãƒ¼ãƒãƒ¼ã¨ã‚¯ãƒ­ã‚¹ã‚¢ãƒ³ãƒ€ãƒ¼ã‚’æ¤œå‡ºã§ãã¾ã™ã€‚
```


ãªã‚‹ã»ã©ï¼`crossover`ã¯è‡ªä½œé–¢æ•°ã ã£ãŸã‚“ã§ã™ã­ã€‚æ–¬æ–°
è¿½è¨˜ï¼š`crossover`ã¯`ta.crossover`ã¨ã™ã‚Œã°è‡ªä½œé–¢æ•°ãªã—ã§åŒæ§˜ã®è¡¨è¨˜ãŒå¯èƒ½ã§ã™ã€‚


å‡ºåŠ›ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ã€ã‚ˆã—ãªã«ãƒãƒ¼ã‚¸ã—ãŸã®ãŒä»¥ä¸‹
```js
//@version=5
indicator("MACD", timeframe="", timeframe_gaps=true)

//--------------------
// MACD
//--------------------

// MACDã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹
fast_length = input.int(12, "Fast Length", group="MACD", minval=1)
slow_length = input.int(26, "Slow Length", group="MACD", minval=1)
signal_length = input.int(9, "Signal Length", group="MACD", minval=1)

// Plot colors
col_macd = input(#2962FF, "MACD Lineâ€ƒâ€„", group="MACD Color Settings", inline="MACD")
col_signal = input(#FF6D00, "Signal Lineâ€ƒâ€†", group="MACD Color Settings", inline="Signal")
col_grow_above = input(#26A69A, "Aboveâ€„â€„â€…Grow", group="MACD Histogram", inline="Above")
col_fall_above = input(#B2DFDB, "Fall", group="MACD Histogram", inline="Above")
col_grow_below = input(#FFCDD2, "Belowâ€ƒGrow", group="MACD Histogram", inline="Below")
col_fall_below = input(#FF5252, "Fall", group="MACD Histogram", inline="Below")

// MACDã‚’è¨ˆç®—ã™ã‚‹
fast_ma = ta.ema(close, fast_length)
slow_ma = ta.ema(close, slow_length)
// RCIã¨åŒã˜å ´æ‰€ã«è¡¨ç¤ºã™ã‚‹ãŸã‚ã€MACDã®å€¤ã‚’100å€ã—ã¦ã„ã‚‹
macd = (fast_ma - slow_ma) * 100
signal = ta.ema(macd, signal_length)
hist = macd - signal

// MACDã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹
hline(0, "Zero Line", color=color.new(#787B86, 50))
plot(hist, title="Histogram", style=plot.style_columns, color=(hist>=0 ? (hist[1] < hist ? col_grow_above : col_fall_above) : (hist[1] < hist ? col_grow_below : col_fall_below)))
plot(macd, title="macd", color=color.blue, linewidth=1)
plot(signal, title="signal", color=color.red, linewidth=1)

// MACDã®ä¸­å¿ƒç·šã¨ã‚·ã‚°ãƒŠãƒ«ã®åå‰ã‚’è¨­å®šã™ã‚‹
plotchar(false, "", "", location.bottom, size = size.tiny)
plotchar(false, "", "MACD", location.bottom, size = size.tiny, color = color.blue)
plotchar(false, "", "Signal", location.bottom, size = size.tiny, color = color.red)

// crossoveré–¢æ•°ã‚’å®šç¾©ã™ã‚‹
crossover(x, y) =>
    x[1] < y[1] and x > y

// crossunderé–¢æ•°ã‚’å®šç¾©ã™ã‚‹
crossunder(x, y) =>
    x[1] > y[1] and x < y

// MACDã¨ã‚·ã‚°ãƒŠãƒ«ã®äº¤å·®ç‚¹ã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹
plotshape(crossover(macd, signal), title="ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹", style=shape.triangleup, location=location.bottom, color=color.green, size=size.small)
plotshape(crossunder(macd, signal), title="ãƒ‡ãƒƒãƒ‰ã‚¯ãƒ­ã‚¹", style=shape.triangledown, location=location.top, color=color.red, size=size.small)

```

`indicator("MACD", overlay=true)`ã®`overlay=true`ã¯ã€è¨­å®šã—ã¦ã—ã¾ã†ã¨ä»–ã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã¨æ··ã–ã£ã¦ã‚ˆãã‚ã‹ã‚‰ãªã„è¡¨ç¤ºã«ãªã‚‹ã®ã§ã€å¤–ã—ã¾ã—ãŸã€‚
ãªã®ã§ã€ç§»å‹•å¹³å‡ç·šã¨ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ã¨ã¯åˆ¥ã§ä¿å­˜ã—ã¾ã—ãŸã€‚
ã‚ªã‚·ãƒ¬ãƒ¼ã‚¿ç³»ã¯ã“ã¡ã‚‰ã«ã¾ã¨ã‚ã¦è¡Œã‘ã°ç¯€ç´„ã§ããã†ã§ã™ã€‚

ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚
é€šå¸¸ã®MACDã«åŠ ãˆã¦ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ã‚„ãƒ‡ãƒƒãƒ‰ã‚¯ãƒ­ã‚¹ã—ã¦ã„ã‚‹ç®‡æ‰€ã«â–²ã®ãƒãƒ¼ã‚¯ãŒã¤ã„ã¦ã„ã¾ã™ã­ã€‚
![](https://storage.googleapis.com/zenn-user-upload/10c0d0fc7209-20230327.png)


# ã¾ã¨ã‚
- ChatGPTã‚’æ´»ç”¨ã—ã¦PineScriptã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’ä½œæˆã§ãã¾ã—ãŸã€‚
- å®Ÿéš›ã®ä½œæˆæ‰‹é †ã‹ã‚‰è©°ã¾ã‚‹ãƒã‚¤ãƒ³ãƒˆã‚„è§£æ±ºæ–¹æ³•ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã—ãŸã€‚
- ChatGPTã®ã‚³ãƒ¼ãƒ‰ã¯å‹•ã‹ãªã„ã“ã¨ã‚‚ã‚ã‚‹ã€‚ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã ã‘ã§åˆ¤æ–­ã§ããªã„éƒ¨åˆ†ã¯ã‚ã‚Šã€éå»ã®çµŒé¨“ã‚„ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã®ç†è§£ã¯ã‚ã‚‹ç¨‹åº¦å¿…è¦


# å‚è€ƒæ–‡çŒ®
https://www.youtube.com/watch?v=ZaPeRJ3rIBY
å‹•ç”»å†…ã§ã¯ã€ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã ã‘ã§ãªãã€ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ã‚„ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã«ã¤ã„ã¦ã‚‚è§¦ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã®è¾ºã‚‚å–ã‚Šå…¥ã‚Œã¦ã¿ãŸã„ã§ã™ã€‚


# NGé›†
![](https://storage.googleapis.com/zenn-user-upload/ba11262a6371-20230327.png)

```js
//@version=5
indicator("æœˆæ¬¡Pivot", overlay=true)

// Pivotã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã®å…¥åŠ›å€¤
h = high
l = low
c = close

// ç¾åœ¨ã®æ—¥ä»˜ã®å¹´æœˆã‚’å–å¾—
current_month = year(time)*100 + month(time)

// ç›´è¿‘5ã‹æœˆåˆ†ã®Pivotã‚’è¨ˆç®—ã™ã‚‹
for i = 0 to 4
    // iãƒ¶æœˆå‰ã®å¹´æœˆã‚’è¨ˆç®—
    month_offset = -i
    year_offset = month_offset < 0 ? 1 : 0
    target_month = year(time[month_offset])*100 + month(time[month_offset])
    
    // iãƒ¶æœˆå‰ã®é«˜å€¤ã€å®‰å€¤ã€çµ‚å€¤ã‚’å–å¾—
    ph = security(syminfo.ticker, "M", high[month_offset])
    pl = security(syminfo.ticker, "M", low[month_offset])
    pc = security(syminfo.ticker, "M", close[month_offset])
    
    // Pivotã‚’è¨ˆç®—
    pivot = (ph + pl + pc) / 3
    r1 = 2*pivot - pl
    r2 = pivot + (ph - pl)
    r3 = ph + 2*(pivot - pl)
    s1 = 2*pivot - ph
    s2 = pivot - (ph - pl)
    s3 = pl - 2*(ph - pivot)
    
    // PivotãŒè¡¨ç¤ºã™ã¹ãæœˆã®å ´åˆã«ã ã‘ã€ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹
    if target_month == current_month
        plot(pivot, color=color.blue, linewidth=2, style=plot.style_circles, title="Pivot")
        plot(r1, color=color.green, linewidth=2, style=plot.style_circles, title="R1")
        plot(r2, color=color.green, linewidth=2, style=plot.style_circles, title="R2")
        plot(r3, color=color.green, linewidth=2, style=plot.style_circles, title="R3")
        plot(s1, color=color.red, linewidth=2, style=plot.style_circles, title="S1")
        plot(s2, color=color.red, linewidth=2, style=plot.style_circles, title="S2")
        plot(s3, color=color.red, linewidth=2, style=plot.style_circles, title="S3")
```

![](https://storage.googleapis.com/zenn-user-upload/3c7eaf39039d-20230327.png)

![](https://storage.googleapis.com/zenn-user-upload/74df4d0f8759-20230327.png)

![](https://storage.googleapis.com/zenn-user-upload/164ca89f0836-20230327.png)

![](https://storage.googleapis.com/zenn-user-upload/66b79930ccff-20230327.png)

çµå±€è§£æ±ºã›ãšã€‚ã€‚ã€‚

### ãƒãƒ‹ãƒ¥ã‚¢ãƒ«
v5ã‹ã‚‰`request.security`ã«ãªã£ãŸã‚ˆã†ã§ã™ã€‚
https://jp.tradingview.com/pine-script-reference/v5/#fun_request{dot}security

ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãŒv3ã‹ã‚‰ã—ã‹ãªã‹ã£ãŸã®ã§ã€`security`é–¢æ•°ãŒã„ã¤ã‹ã‚‰ä½¿ãˆãŸã‹ã¯ä¸æ˜ã§ã™ãŒã€v3ã€v4ã«ã¯`security`é–¢æ•°ãŒå­˜åœ¨ã—ã¾ã™ã€‚

è©²å½“ç®‡æ‰€ã‚’request.securityã«ã—ãŸã ã‘ã§ã¯ã‚¨ãƒ©ãƒ¼ã®ã¾ã¾ãªã®ã§ã€ã‚‚ã†å°‘ã—èª¿ã¹ãªã„ã¨åˆ†ã‹ã‚‰ãªã„ã§ã™ã­ã‡ã€‚
