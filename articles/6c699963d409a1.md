---
title: "Chart.jsã®ã‚°ãƒ©ãƒ•ã§ãƒ©ãƒ™ãƒ«ã‚’æ”¹è¡Œã™ã‚‹æ–¹æ³•"
emoji: "ğŸš€"
type: "tech"
topics:
  - "chartjs"
  - "æ”¹è¡Œ"
  - "ãƒ©ãƒ™ãƒ«"
published: true
published_at: "2024-05-04 10:00"
---

## ã¯ã˜ã‚ã«
ã“ã®è¨˜äº‹ã§ã¯ã€Chart.jsã®æ£’ã‚°ãƒ©ãƒ•ã§xè»¸ã®ãƒ©ãƒ™ãƒ«ãŒé•·ã„ãƒ†ã‚­ã‚¹ãƒˆã®å ´åˆã®æ”¹è¡Œæ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ã‚ˆã‚Šè¦‹ã‚„ã™ã„ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ãƒ©ãƒ™ãƒ«ã®æŠ˜ã‚Šè¿”ã—æ–¹æ³•ã‚’è§£èª¬ã—ã¾ã™ã€‚

~~å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯è¼‰ã£ã¦ã„ãªã‹ã£ãŸã®ã§ã™ãŒ~~å…¬å¼ã®Youtubeå‹•ç”»ã§è§£èª¬ã—ã¦ã„ã¾ã—ãŸã€‚
å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚‚æ›¸ã„ã¦ã‚ã‚Šã¾ã—ãŸã€‚
https://www.chartjs.org/docs/latest/general/data-structures.html
> In case you want multiline labels you can provide an array with each line as one entry in the array.
> è¤‡æ•°è¡Œã®ãƒ©ãƒ™ãƒ«ãŒå¿…è¦ãªå ´åˆã¯ã€å„è¡Œã‚’é…åˆ—å†…ã® 1 ã¤ã®ã‚¨ãƒ³ãƒˆãƒªã¨ã—ã¦å«ã‚€é…åˆ—ã‚’æä¾›ã§ãã¾ã™ã€‚

Chart.jså…¬å¼è§£èª¬å‹•ç”»
https://www.youtube.com/watch?v=2ZFdDiGqNVw

æœ¬è¨˜äº‹ã¯ä¸Šè¨˜ã®å†…å®¹ã«åŸºã¥ã„ã¦ã€ãƒ©ãƒ™ãƒ«ã®æ”¹è¡Œæ–¹æ³•ã‚’è§£èª¬ã—ã¾ã™ã€‚

## åŸºæœ¬çš„ãªè¨­å®šã¨å•é¡Œç‚¹
Chart.jsã‚’ä½¿ã£ã¦åŸºæœ¬çš„ãªã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã¾ã™ã€‚
ã—ã‹ã—ã€ãƒ‡ãƒ¼ã‚¿ã®è¦ç´ ã‚’ç¤ºã™ãƒ©ãƒ™ãƒ«ã®æ–‡å­—ãŒé•·ã„å ´åˆã€é©åˆ‡ã«æŠ˜ã‚Šè¿”ã•ã‚Œãš1è¡Œã§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ©ãƒ™ãƒ«ãŒã‚°ãƒ©ãƒ•ã®é ˜åŸŸã‚’åœ§è¿«ã—ãŸã‚Šã€ã‚­ãƒ£ãƒ³ãƒã‚¹ã®ã‚µã‚¤ã‚ºã‚’è¶…ãˆã¦ã—ã¾ã†ã“ã¨ãŒå•é¡Œã¨ãªã‚Šã¾ã™ã€‚

æ”¹è¡Œã™ã‚‹ãŸã‚ã«`\n`ã‚’ä»˜ä¸ã—ãŸã‚Šã€ticksã®callbackã‚’åˆ©ç”¨ã—ã¦valueã‚’ã‚¹ãƒ©ã‚¤ã‚¹ã™ã‚‹æ–¹æ³•ãªã©ãŒè¦‹ã¤ã‹ã‚‹ã®ã§ã™ãŒã€ã„ãšã‚Œã‚‚ç›®çš„ã«ãƒãƒƒãƒã—ã¾ã›ã‚“ã€‚
å‰è€…ã¯ã€`\n`ã‚’ä»˜ä¸ã—ã¦ã‚‚HTMLã§ã¯æ”¹è¡Œã•ã‚Œãªã„ãŸã‚ã€åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã®éš™é–“ãŒã§ãã‚‹ã ã‘ã§ã™ã€‚
å¾Œè€…ã¯ã€ticksã‚’ç”¨ã„ã‚‹ã¨ãƒ©ãƒ™ãƒ«ã§æŒ‡å®šã—ãŸå†…å®¹ãŒä¸Šæ›¸ãã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚

## ãƒ©ãƒ™ãƒ«ã®æ”¹è¡Œæ–¹æ³•
ã“ã®å•é¡Œã®è§£æ±ºæ–¹æ³•ã¯ã€ãƒ©ãƒ™ãƒ«ã®é…åˆ—ã«æ–‡å­—åˆ—ã‚’æŒ‡å®šã™ã‚‹ã¨ã“ã‚ã‚’ã€æ–‡å­—åˆ—ã®é…åˆ—ã‚’æŒ‡å®šã—ã¾ã™ã€‚
å…·ä½“çš„ã«ã¯ã€ä»¥ä¸‹ã€‚

```
2021å¹´10æœˆ10æ—¥ æœˆæ›œæ—¥
```
ã¨ã„ã†ãƒ©ãƒ™ãƒ«ã‚’ã€
```
2021å¹´10æœˆ10æ—¥
æœˆæ›œæ—¥
```
ã®ã‚ˆã†ã«æ”¹è¡Œã—ãŸã„å ´åˆ

é€šå¸¸ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ©ãƒ™ãƒ«ã‚’è¨­å®šã™ã‚‹ã¨ã“ã‚ã‚’ã€
```js
labels: [
  "2021å¹´10æœˆ10æ—¥ æœˆæ›œæ—¥",
  "2021å¹´10æœˆ11æ—¥ ç«æ›œæ—¥"
]
```

ä¸‹è¨˜ã®ã‚ˆã†ã«ã€æ”¹è¡Œã—ãŸã„ä½ç½®ã‚’é…åˆ—ã®è¦ç´ ã¨ã—ã¦åŒºåˆ‡ã‚‹ã“ã¨ã§æ”¹è¡Œã•ã‚Œã¾ã™ã€‚
```js
labels: [
  ["2021å¹´10æœˆ10æ—¥", "æœˆæ›œæ—¥"],
  ["2021å¹´10æœˆ11æ—¥", "ç«æ›œæ—¥"]
]
```

ãƒ©ãƒ™ãƒ«ãŒAPIç­‰ã§å–å¾—ã™ã‚‹å¯å¤‰ã™ã‚‹ä»»æ„ã®æ–‡å­—æ•°ã§æ”¹è¡Œã—ãŸã„å ´åˆã¯ã€
ä¸‹è¨˜ã®ã‚ˆã†ã«ã™ã‚Œã°ã‚ˆã„ã§ã—ã‚‡ã†ã€‚
```js
  // APIç­‰ã§å–å¾—ã—ãŸã¨ä»®å®š
  const labels = [
    "2021å¹´10æœˆ10æ—¥ æœˆæ›œæ—¥",
    "2021å¹´10æœˆ11æ—¥ ç«æ›œæ—¥"
  ];
  // 6æ–‡å­—ã”ã¨ã«åˆ†å‰²ã™ã‚‹
  const adjustLabels = labels.value.map((label) => {
    return label.length <= 6 ? [label] : label.match(/.{1,6}/g);
  });

    ...

  // Chart.jsã®ãƒ©ãƒ™ãƒ«è¨­å®š
  labels: adjustLabels,
  data: ...
```


## ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
ãƒ©ãƒ™ãƒ«ãŒæ”¹è¡Œã•ã‚Œç›®çš„ãŒé”æˆã•ã‚Œä½•ã‚ˆã‚Šã§ã™ãŒã€
ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã‚’ç”¨ã„ã¦ã„ã‚‹å ´åˆã€ãƒ©ãƒ™ãƒ«ã‚’æ”¹è¡Œã—ãŸã“ã¨ã«ã‚ˆã£ã¦ã€è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹å†…å®¹ãŒã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®æ–‡å­—åˆ—ã¨ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚
â€»ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®å†…å®¹ã‚’ç‰¹ã«æŒ‡å®šã—ãªã„å ´åˆã€ãƒ©ãƒ™ãƒ«ã®å€¤ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã€ãƒ©ãƒ™ãƒ«ã®æ”¹è¡Œå¯¾å¿œã«åˆã‚ã›ã¦ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚‚è¡Œã„ã¾ã™ã€‚
ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ã‚¿ã‚¤ãƒˆãƒ«ã«ãƒ©ãƒ™ãƒ«ã®å€¤ãŒè¨­å®šã•ã‚Œã‚‹ãŸã‚ã€`callbacks`ã‚’å®šç¾©ã—ã¦ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã«ãªã£ã¦ã—ã¾ã£ã¦ã„ã‚‹æ–‡å­—åˆ—ã‹ã‚‰ã‚«ãƒ³ãƒã‚’é™¤å»ã™ã‚‹ã“ã¨ã§ã€è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆã‚’æ•´ãˆã¾ã™ã€‚

```javascript
tooltips: {
  callbacks: {
    title: (tooltipItem) => {
      return tooltipItem[0]?.label?.replace(/,/g, '') || '';
    },
  }
}
```

## ã‚µãƒ³ãƒ—ãƒ«

```html
<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>Chart.js Sample</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    canvas {
      width: 50%;
      height: 50%;
    }
  </style>
</head>

<body>
  <div>
    <canvas id="myChart"></canvas>
  </div>
  <script src="script.js"></script>
</body>

</html>
```

```js
const ctx = document.getElementById('myChart').getContext('2d');
const myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: [
            ["2021å¹´10æœˆ10æ—¥", "æœˆæ›œæ—¥"],
            ["2021å¹´10æœˆ11æ—¥", "ç«æ›œæ—¥"],
            ["2021å¹´10æœˆ12æ—¥", "æ°´æ›œæ—¥"]
        ],
        datasets: [{
            label: 'ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿',
            data: [12, 19, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            x: {
                beginAtZero: true
            }
        },
        tooltips: {
            callbacks: {
                title: function(tooltipItems) {
                    return tooltipItems[0]?.label?.replace(/,/g, '');
                }
            }
        }
    }
});

```

![](https://storage.googleapis.com/zenn-user-upload/6ff046267564-20240503.png)

## ã¾ã¨ã‚
Chart.jsã§ã®ãƒ©ãƒ™ãƒ«ã‚’æ”¹è¡Œã™ã‚‹æ–¹æ³•ã¯ã€ãƒ©ãƒ™ãƒ«ã®é…åˆ—ã«é…åˆ—ã‚’ãƒã‚¹ãƒˆã™ã‚‹ã“ã¨ã§å®Ÿç¾å¯èƒ½ã€‚
ã“ã®æ–¹æ³•ã«ã‚ˆã‚Šã€é•·ã„ãƒ©ãƒ™ãƒ«ã‚‚é©åˆ‡ã«è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦èª­ã¿ã‚„ã™ã„ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
