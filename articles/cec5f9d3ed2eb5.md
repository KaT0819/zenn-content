---
title: "LINEã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã„ã¦ã¿ãŸ"
emoji: "ğŸŒŸ"
type: "tech"
topics:
  - "go"
  - "line"
  - "linenotify"
published: true
published_at: "2023-08-12 16:01"
---


# ã¯ã˜ã‚ã«
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ã‚‹ã‚·ãƒªãƒ¼ã‚ºã§ã‚„ã£ã¦ã„ã“ã†ã¨æ€ã„ã¾ã—ãŸã®ã§ã€LINEã‚„ã£ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚


# LINEã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹æ–¹æ³•
LINEã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚
## LINE Notify
ã‚·ãƒ³ãƒ—ãƒ«ãªæ–¹æ³•ã€‚é€šçŸ¥ã‚’å—ã‘å–ã‚‹ã ã‘ãªã‚‰ã“ã‚Œã§OK
https://notify-bot.line.me/ja/

## Messaging API
https://developers.line.biz/ja/services/messaging-api/
ãƒ†ã‚­ã‚¹ãƒˆä»¥å¤–ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸(ã‚¹ã‚¿ãƒ³ãƒ—ã€ç”»åƒã€å‹•ç”»ã€éŸ³å£°ãªã©)ã‚’é€ã‚ŠãŸã„å ´åˆã¯ã“ã¡ã‚‰


ã“ã“ã§ã¯LINE Notifyã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚

## LINE Notifyã¨ã¯
LINE Notifyã¯ã€LINE Messaging APIã‚’ä½¿ç”¨ã—ã¦ã€å¤–éƒ¨ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰LINEã«é€šçŸ¥ã‚’é€ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚é–‹ç™ºè€…ã¯LINE Notifyã‚’åˆ©ç”¨ã—ã¦ã€ã•ã¾ã–ã¾ãªæƒ…å ±ã‚„ã‚¤ãƒ™ãƒ³ãƒˆã®é€šçŸ¥ã‚’LINEä¸Šã«ç°¡å˜ã«é€ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## LINE Notifyã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹æ–¹æ³•
ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç™»éŒ²ã™ã‚‹æ–¹æ³•ã¨ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚
ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®ç™ºè¡Œã§ã‚ã‚Œã°ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç™»éŒ²ã—ãªãã¦ã‚‚ç°¡å˜ã«é€£æºãŒå¯èƒ½ã§ã™ã€‚


## ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—
ãƒã‚¤ãƒšãƒ¼ã‚¸ã‹ã‚‰ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã—ã¾ã™ã€‚
ãƒã‚¤ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ã€ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®å³ä¸Šã«ã‚ã‚‹ãƒ­ã‚°ã‚¤ãƒ³ã®ãƒªãƒ³ã‚¯ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚

ä»¥å‰ã¯ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã—ã‹ãƒ­ã‚°ã‚¤ãƒ³ã§ããªã‹ã£ãŸã®ã§ã™ãŒã€
QRã‚³ãƒ¼ãƒ‰ã§ã®ãƒ­ã‚°ã‚¤ãƒ³ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã—ãŸã®ã§ã€ã“ã¡ã‚‰ã®æ–¹ãŒç°¡å˜ã ã¨æ€ã„ã¾ã™ã€‚

ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸå¾Œã¯ã€Œãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹ã€ãƒœã‚¿ãƒ³ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/6a3778672b44-20230730.png)

ã“ã“ã§ã¯ã€ã€Œé€šçŸ¥ã€ã¨ã„ã†ã‚°ãƒ«ãƒ¼ãƒ—ã«é€šçŸ¥ã‚’é€ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/42eb5a2c0363-20230730.png =250x)

ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹ã¨LINEã®æ–¹ã«`LINE Notify`ã¨ã„ã†åå‰ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå±Šãã¨æ€ã„ã¾ã™ã€‚


ç™ºè¡Œã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ã‚³ãƒ”ãƒ¼ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚
![](https://storage.googleapis.com/zenn-user-upload/9ec1cd85169b-20230730.png =250x)
ã‚‚ã—ã€é–“é•ã£ã¦é–‰ã˜ã¦ã—ã¾ã£ãŸå ´åˆã¯ã‚‚ã†è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã®ã§ã€ç™ºè¡Œã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’å‰Šé™¤ã—ã¦ä½œã‚Šç›´ã—ã¾ã—ã‚‡ã†ã€‚

ç™ºè¡Œã•ã‚Œã‚‹ã¨ãƒã‚¤ãƒšãƒ¼ã‚¸ã«å…¥åŠ›ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³åã§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/d4247e307543-20230730.png =400x)

## ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ãƒ†ã‚¹ãƒˆ
https://notify-api.line.me/api/notify
ã«POSTé€ä¿¡ã™ã‚‹ã“ã¨ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚


ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚‹ãŸã‚ã®å‰æº–å‚™ã¨ã—ã¦ã€å…ˆã»ã©ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹éš›ã«é¸ã‚“ã ãƒˆãƒ¼ã‚¯ã‚°ãƒ«ãƒ¼ãƒ—ã«`LINE Notify`ã‚’è¿½åŠ ã—ã¦ç½®ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/d40d5018ad80-20230731.png =250x)

```
curl -X  POST \
https://notify-api.line.me/api/notify \
 -H "Authorization: Bearer <ãƒˆãƒ¼ã‚¯ãƒ³>" \
 -H "Content-Type: application/x-www-form-urlencoded" \
 -d message=ãƒ†ã‚¹ãƒˆ
```
`message=`ã«ç¶šã‘ã¦é€ã‚ŠãŸã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/ba84fe9f2cab-20230731.png =250x)

ä»–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚è©¦ã—ã¦ã¿ã¾ã™ã€‚
```
curl -X  POST \
https://notify-api.line.me/api/notify \
 -H "Authorization: Bearer blac8qE9heNhEXO47yGaEiVAlcxIq0zOsfzwviLjm9T" \
 -H "Content-Type: application/x-www-form-urlencoded" \
 -d message=ãƒ†ã‚¹ãƒˆ \
 -d stickerPackageId=446 \
 -d stickerId=1988 \
 -d notificationDisabled=true
```

![](https://storage.googleapis.com/zenn-user-upload/3aa69bf4946f-20230731.png =250x)


ä»–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è©³ç´°ã¯ä»¥ä¸‹ã«è¼‰ã£ã¦ã„ã¾ã™ã€‚
https://notify-bot.line.me/doc/ja/

é€ä¿¡å¯èƒ½ãªã‚¹ã‚¿ãƒ³ãƒ—ã®ä¸€è¦§
https://developers.line.biz/ja/docs/messaging-api/sticker-list/


# LINEã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ã‚µãƒ³ãƒ—ãƒ«

Goã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚
ãƒ†ã‚¹ãƒˆã§å®Ÿè¡Œã—ãŸã‚³ãƒãƒ³ãƒ‰ã«åŠ ãˆã¦ã€ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ãŸã€‚

ã‚³ãƒ¼ãƒ‰ã¯ä¾‹ã«ã‚ˆã£ã¦ChatGPTã«ãƒãƒ£ãƒãƒ£ã£ã¨æ›¸ã„ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚

## main.go
```go
package main

import (
	"bytes"
	"fmt"
	"io"
	"log"
	"mime/multipart"
	"net/http"
	"net/url"
	"os"

	"github.com/joho/godotenv"
)

func main() {
	// .envãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã‚€
	err := godotenv.Load()
	if err != nil {
		log.Fatalf("Error loading .env file: %s", err)
	}

	accessToken := os.Getenv("LINE_ACCESS_TOKEN")

	// LINE Notify APIã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆURL
	apiURL := "https://notify-api.line.me/api/notify"

	// POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’å®šç¾©
	formData := url.Values{}
	formData.Set("message", "ãƒ†ã‚¹ãƒˆ")
	formData.Set("stickerPackageId", "8515")
	formData.Set("stickerId", "16581242")
	// formData.Set("notificationDisabled", "true") // é€šçŸ¥ã‚’é€ã‚‰ãªã„å ´åˆtrue

	// ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
	file, err := os.Open("sample_image.jpeg")
	if err != nil {
		log.Fatalf("Error opening file: %s", err)
	}
	defer file.Close()

	// ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’ãƒãƒƒãƒ•ã‚¡ã«èª­ã¿è¾¼ã‚€
	var requestBody bytes.Buffer
	multipartWriter := multipart.NewWriter(&requestBody)

	// ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ 
	fileField := "imageFile"
	filePart, err := multipartWriter.CreateFormFile(fileField, "sample_image.jpeg")
	if err != nil {
		log.Fatalf("Error creating form file: %s", err)
	}
	_, err = io.Copy(filePart, file)
	if err != nil {
		log.Fatalf("Error copying file content: %s", err)
	}

	// ä»–ã®ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ 
	for key, values := range formData {
		for _, value := range values {
			_ = multipartWriter.WriteField(key, value)
		}
	}

	// ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’ã‚¯ãƒ­ãƒ¼ã‚º
	multipartWriter.Close()

	// POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ
	req, err := http.NewRequest("POST", apiURL, &requestBody)
	if err != nil {
		log.Fatalf("Error creating request: %s", err)
	}

	// ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¨­å®š
	req.Header.Set("Authorization", "Bearer "+accessToken)
	req.Header.Set("Content-Type", multipartWriter.FormDataContentType())

	// HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆ
	client := &http.Client{}

	// ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å–å¾—
	resp, err := client.Do(req)
	if err != nil {
		log.Fatalf("Error sending request: %s", err)
	}
	defer resp.Body.Close()

	// ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¡¨ç¤º
	fmt.Println("Status Code:", resp.StatusCode)
	body, err := io.ReadAll(resp.Body)
	if err != nil {
		log.Fatalf("Error reading response body: %s", err)
	}
	fmt.Println("Response Body:", string(body))
}
```

## .env
LINE_ACCESS_TOKENã«ç™ºè¡Œã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®šã—ã¾ã™ã€‚
```
LINE_ACCESS_TOKEN=your-bot-token
```

## å®Ÿè¡Œçµæœ
```
go run ./main.go
```

ç„¡äº‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã‚¹ã‚¿ãƒ³ãƒ—ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒã§ãã¾ã—ãŸï¼
![](https://storage.googleapis.com/zenn-user-upload/430f660aadc1-20230731.png =250x)

## ã¾ã¨ã‚
LINE Notifyã®å§‹ã‚æ–¹ã‚„åŸºæœ¬çš„ãªä½¿ã„æ–¹ã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚
ã‚„ã¯ã‚Šé¦´æŸ“ã¿ã‚ã‚‹LINEãªã®ã§å°å…¥ã¯ç°¡å˜ã«ã§ãã‚‹å°è±¡ã§ã—ãŸã€‚
ã¡ã‚‡ã£ã¨ã—ãŸé€šçŸ¥ã§ã‚ã£ãŸã‚Šã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹ã¨ã„ã†ç›®çš„ã ã‘ã§ã‚ã‚Œã°ã€ååˆ†ã«ç›®çš„ã‚’æœãŸã›ã‚‹ã¨æ€ã„ã¾ã™ã€‚

ä»Šå›ã‚µãƒ³ãƒ—ãƒ«ã§æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã«ã‚ã‚Šã¾ã™ã®ã§ã€å‚è€ƒã«ã—ã¦é ‚ã‘ã‚Œã°å¹¸ã„ã§ã™ã€‚
https://github.com/KaT0819/line-notify-sample


## å‚è€ƒ

LINE Notifyã«é–¢ã™ã‚‹å‚è€ƒæƒ…å ±ã‚„å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®ãƒªãƒ³ã‚¯ã§ã™ã€‚

LINE Notify
https://notify-bot.line.me/ja/

LINE Notify API Document
https://notify-bot.line.me/doc/ja/

é€ä¿¡å¯èƒ½ãªã‚¹ã‚¿ãƒ³ãƒ—ã®ä¸€è¦§
https://developers.line.biz/ja/docs/messaging-api/sticker-list/
